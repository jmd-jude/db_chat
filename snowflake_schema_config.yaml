business_context:
  description: Snowflake database schema configuration
  key_concepts:
    - Generated from Snowflake database inspection
    - Please update with business-specific concepts

database_config:
  type: snowflake
  date_functions:
    year: "DATE_PART('YEAR', {column})"
    month: "DATE_TRUNC('MONTH', {column})"
    date: "DATE_TRUNC('DAY', {column})"
  date_formats:
    literal: YYYY-MM-DD
    year: YYYY
    month: YYYY-MM
  example_patterns:
    - description: Monthly aggregation
      pattern: "DATE_TRUNC('MONTH', {column}) AS {alias}"
    - description: Year comparison
      pattern: "DATE_PART('YEAR', {column}) = {year}"
    - description: Date range
      pattern: "{column} BETWEEN '{start_date}' AND '{end_date}'"
  example_queries:
    - description: Monthly sales analysis
      query: |
        SELECT 
          DATE_TRUNC('MONTH', order_date) AS month,
          SUM(amount) AS total_sales,
          COUNT(DISTINCT customer_id) AS unique_customers,
          AVG(amount) AS avg_order_value
        FROM orders
        GROUP BY DATE_TRUNC('MONTH', order_date)
        ORDER BY month DESC
    - description: Customer segmentation
      query: |
        SELECT 
          c.customer_segment,
          COUNT(DISTINCT o.customer_id) AS customer_count,
          SUM(o.amount) AS total_revenue,
          AVG(o.amount) AS avg_order_value
        FROM orders o
        JOIN customers c ON o.customer_id = c.customer_id
        GROUP BY c.customer_segment
        ORDER BY total_revenue DESC

query_guidelines:
  tips:
    - Use proper table aliases in joins
    - Include appropriate WHERE clauses
    - Use Snowflake date functions for timestamp operations
    - Consider using window functions for advanced analytics
  validation:
    - Ensure column references are fully qualified (table.column)
    - Include proper type casting for numerical operations
    - Use COALESCE or NVL for handling NULL values
    - Consider using QUALIFY for filtering window function results

tables: {}  # Will be populated by schema inspector
